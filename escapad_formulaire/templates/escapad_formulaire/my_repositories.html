<!-- Template for listing the user's course -->

{% extends "app.html" %}

{%  load static %}

{% block content %}
  <h1>Dépôts de {{ user }}</h1>

  {% if user.is_authenticated %}

    <table>
      <tr>
        <th>Nom du dépot</th>
        <th>Utilisateur git</th>
        <th>Feedback</th>
        <th>Archive du cours</th>
        <th>Site généré</th>
        <th>Suppression</th>

      </tr>
    {% for repo in repositories.all %}
      <tr>
        <td>{{ repo.git_name }}</td>
        <td>{{ repo.git_username }} </td>
        <td>{{ repo.show_feedback }} </td>
        <td><a href="{% url 'build_zip_repo' repo.slug %}">Générer le zip</a></td>
        <td><a href="{% url 'visit_site' repo.slug %}">Accéder au site</a></td>
        <td><a href="{% url 'delete_repository' repo.slug %}">Supprimer le dépôt</a></td>


      </tr>
    {% endfor %}
    </table>


    <br>

    <form action="{% url 'my_repositories' %}" method="post"  enctype="multipart/form-data">
        {% csrf_token %}
        <fieldset id="home">
          <legend>Ajouter un dépôt</legend>
          {{ form.as_p}}
        </fieldset>

        <input type="submit" value="Commencer à créer" />

        <button type="button" class="popup" onclick="showPopUp('popup1')">
          <img src="{% static 'img/help.png' %}" height="20" width="20"/>
          <span class="popuptext" id="popup1">
            Générer un nouveau cours:<br>
            Un cours dispose d'un ensemble de module et une page d'accueil. <br>
            Il est possible de partager le cours à d'autres utilisateurs, <br>
            et également de l'écrire en simultané.
          </span>
        </button>

    </form>

  {% else %}
  <p> Vous n'êtes pas censé avoir accès à cette page, veuillez vous connecter !</p>
  {% endif %}

{% endblock %}
